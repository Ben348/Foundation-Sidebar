;(function($,window,document,undefined){var pluginName='sidebar',dataPlugin='plugin_'+pluginName,defaults={speed:'normal',dropdownToggled:function(opened,element,belowBreakpoint){},menuToggled:function(opened){},breakpointPassed:function(belowBreakpoint){}};var Plugin=function(element){this.options=$.extend({},defaults);this.element=$(element);this._breakpoint=this.breakpoint()};var toggleDropdownItems=function(context,element){var self=context;var parent=$(element).parent();if(parent.hasClass('active')){parent.removeClass('active');parent.find('.dropdown-menu').stop().slideUp(self.options.speed,function(){self.options.dropdownToggled(false,parent)})}else{var open=parent.parent().find('.active');open.removeClass('active');open.find('.dropdown-menu').slideUp(self.options.speed,function(){self.options.dropdownToggled(false,open)});parent.addClass('active');parent.find('.dropdown-menu').stop().slideDown(self.options.speed,function(){self.options.dropdownToggled(true,parent)})}};var toggleMenu=function(context,element){var self=context;if(self.element.hasClass('open')){self.element.find('.sidebar-nav').stop().slideUp(self.options.speed,function(){self.element.removeClass('open');self.options.menuToggled(false)})}else{self.element.find('.sidebar-nav').stop().slideDown(self.options.speed,function(){self.element.addClass('open');self.options.menuToggled(true)})}};var resize=function(context){var self=context;if(self.breakpoint()!==self._breakpoint){self._breakpoint=self.breakpoint();self.options.breakpointPassed(self.breakpoint());if(self.element.hasClass('open')){self.element.removeClass('open').find('.sidebar-nav').hide()}}};Plugin.prototype={init:function(options){var self=this;$.extend(this.options,options);Foundation.utils.register_media('sidebar','custom-mq-sidebar');self.element.find('.dropdown > a').click(function(event){event.preventDefault();toggleDropdownItems(self,this)});self.element.find('.toggle-topbar > a').click(function(event){event.preventDefault();toggleMenu(self,this)});$(window).resize(function(){resize(self)})},destroy:function(){this.element.data(dataPlugin,null)},breakpoint:function(){return!matchMedia(Foundation.media_queries['sidebar']).matches}};$.fn[pluginName]=function(arg){var args,instance;if(!(this.data(dataPlugin)instanceof Plugin)){this.data(dataPlugin,new Plugin(this))}instance=this.data(dataPlugin);instance.element=this;if(typeof arg==='undefined'||typeof arg==='object'){if(typeof instance['init']==='function'){instance.init(arg)}}else if(typeof arg==='string'&&typeof instance[arg]==='function'){args=Array.prototype.slice.call(arguments,1);return instance[arg].apply(instance,args)}else{$.error('Method '+arg+' does not exist on jQuery.'+pluginName)}}}(jQuery,window,document));